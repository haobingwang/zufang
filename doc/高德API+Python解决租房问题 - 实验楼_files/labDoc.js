!function(n){function e(a){if(t[a])return t[a].exports;var o=t[a]={exports:{},id:a,loaded:!1};return n[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(5), __webpack_require__(11), __webpack_require__(13), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (utils, marked, hljs, loading) {\n    var jdata = $('#jinja-data').data();\n\n    var md = $('#editor').val();\n    var preview = $('#preview');\n\n    md = marked(md);\n    preview.html(md);\n    preview.find('a').attr('target', '_blank');\n    hljs.initHighlightingOnLoad();\n\n    // 开始实验 post\n    function startLabPost(url, next, data) {\n        $.post(url, data || {}).done(function (data) {\n            if (data.status == 'success') {\n                if (jdata.tencentLabid.indexOf(jdata.courseId) > -1) {\n                    window.location.reload();\n                }\n                if ($(window).width() < 769) {\n                    loading.hide();\n                    window.location.href = next;\n                } else {\n                    setTimeout(function () {\n                        loading.hide();\n                        window.location.href = data.nexturl;\n                    }, 2000);\n                }\n            } else {\n                if (data.nexturl) {\n                    window.location.href = data.nexturl;\n                } else {\n                    loading.hide();\n                    utils.flashMessage(data.status, data.message);\n                }\n            }\n        });\n    }\n\n    // 开始实验\n    function startLab() {\n        var evaluationCourseModal = $('#start-evaluation-course');\n\n        // 当前没有正在进行的实验\n        $('.lab-item-start').on('click', function () {\n            var url = $(this).data('url');\n            var next = $(this).data('mobileUrl');\n\n            if ($(this).hasClass('is-evaluation-course')) {\n                evaluationCourseModal.modal('show');\n                evaluationCourseModal.find('.start-confirm').off('click').on('click', function () {\n                    evaluationCourseModal.modal('hide');\n                    loading.show();\n                    startLabPost(url, next);\n                });\n            } else if ($(this).hasClass('member-vm')) {\n                // 会员开始实验\n                var vipModal = $('#vip-startlab-modal');\n                vipModal.modal('show');\n\n                $('.newvm', vipModal).off('click').on('click', function () {\n                    vipModal.modal('hide');\n                    loading.show();\n                    startLabPost(url, next);\n                });\n                $('.oldvm', vipModal).off('click').on('click', function () {\n                    var data = { 'new_env': 0 };\n                    vipModal.modal('hide');\n                    loading.show();\n                    startLabPost(url, next, data);\n                });\n            } else {\n                loading.show();\n                startLabPost(url, next);\n            }\n\n            return false;\n        });\n\n        // 当前有正在进行的实验\n        $('.lab-item-start-newlab').on('click', function () {\n            if ($(this).hasClass('lab-item-started')) {\n                window.location.href = $('#header-continue-lab').attr('href');\n            } else {\n                var url = $(this).data('url');\n                var next = $(this).data('mobileUrl');\n\n                if ($(this).hasClass('is-evaluation-course')) {\n                    evaluationCourseModal.find('.start-newlab').html('<strong>一个实验正在进行，是否停止它，开始新实验？</strong>');\n                    evaluationCourseModal.modal('show');\n                    evaluationCourseModal.find('.start-confirm').off('click').on('click', function () {\n                        evaluationCourseModal.modal('hide');\n                        loading.show();\n\n                        $.post(jdata.startNewlabUrl, { userlab: jdata.userlabId }).done(function (data) {\n                            if (data.status == \"success\") {\n                                // 延迟3秒\n                                setTimeout(function () {\n                                    startLabPost(url, next);\n                                }, 3000);\n                            } else {\n                                loading.hide();\n                                utils.flashMessage(data.status, data.message);\n                            }\n                        });\n                    });\n                } else if ($(this).hasClass('member-vm')) {\n                    // 会员开始实验\n                    var vipModal = $('#vip-startlab-modal');\n                    vipModal.find('.start-newlab').html('<strong>一个实验正在进行，是否停止它，开始新实验？</strong>');\n                    vipModal.modal('show');\n\n                    $('.newvm', vipModal).off('click').on('click', function () {\n                        vipModal.modal('hide');\n                        loading.show();\n                        $.post(jdata.startNewlabUrl, { userlab: jdata.userlabId }).done(function (data) {\n                            if (data.status == 'success') {\n                                setTimeout(function () {\n                                    startLabPost(url, next);\n                                }, 3000);\n                            } else {\n                                loading.hide();\n                                utils.flashMessage(data.status, data.message);\n                            }\n                        });\n                    });\n                    $('.oldvm', vipModal).off('click').on('click', function () {\n                        vipModal.modal('hide');\n                        loading.show();\n                        $.post(jdata.startNewlabUrl, { userlab: jdata.userlabId }).done(function (data) {\n                            if (data.status == 'success') {\n                                setTimeout(function () {\n                                    var data = { 'new_env': 0 };\n                                    startLabPost(url, next, data);\n                                }, 3000);\n                            } else {\n                                loading.hide();\n                                utils.flashMessage(data.status, data.message);\n                            }\n                        });\n                    });\n                } else {\n                    $('#start-newlab').modal('show');\n                    $('.start-newlab-confirm').off('click').on('click', function () {\n                        $('#start-newlab').modal('hide');\n                        loading.show();\n\n                        $.post(jdata.startNewlabUrl, { userlab: jdata.userlabId }).done(function (data) {\n                            if (data.status == \"success\") {\n                                // 延迟3秒\n                                setTimeout(function () {\n                                    startLabPost(url, next);\n                                }, 3000);\n                            } else {\n                                loading.hide();\n                                utils.flashMessage(data.status, data.message);\n                            }\n                        });\n                    });\n                }\n            }\n        });\n    }\n\n    function boxFixed(id) {\n        var obj = document.getElementById(id);\n        if (!obj) {\n            return false;\n        }\n        var _getHeight = obj.offsetTop;\n        var _getWidth = $(obj).width();\n\n        window.onscroll = function () {\n            changePos(id, _getHeight, _getWidth);\n        };\n    }\n    function changePos(id, height, width) {\n        var obj = document.getElementById(id);\n        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n\n        if (scrollTop < height) {\n            obj.style.position = 'relative';\n            obj.style.top = '0';\n        } else {\n            obj.style.position = 'fixed';\n            obj.style.top = '60px';\n            $(obj).width(width);\n        }\n    }\n    $(function () {\n        boxFixed('info-panel');\n    });\n\n    // 腾讯云配套实验，停止实验\n    $('.vip-banner .stop-lab-btn').on('click', function () {\n        loading.show();\n        $.post(jdata.startNewlabUrl, { userlab: jdata.userlabId }).done(function (data) {\n            if (data.status == 'success') {\n                window.location.href = jdata.courseDetail;\n            }\n        });\n    });\n\n    // 下载文档\n    if (jdata.tencentLabid.indexOf(jdata.courseId) > -1) {\n        var html = $('<a href=\"http://labfile-10066424.cos.myqcloud.com/%E5%9C%A8%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAwordpress%E4%B8%AA%E4%BA%BA%E7%AB%99%E7%82%B9.pdf\" target=\"_blank\" class=\"btn btn-default\"><i class=\"fa fa-file-word-o\"></i>下载文档</a>');\n        $('#preview > h1:eq(0)').append(html);\n    }\n\n    // 剩余时间\n    $(function () {\n        var deadline = new Date().getTime() + jdata.leftTime * 1000;\n        var leftTime = deadline - new Date().getTime();\n\n        var timer = setInterval(function () {\n            if (new Date().getTime() == deadline) {\n                clearInterval(timer);\n            }\n\n            if (leftTime > 3600) {\n                leftTime = parseInt(leftTime / 1000);\n            }\n\n            var m = Math.floor(leftTime / 60);\n            var s = leftTime % 60;\n            m = m < 10 ? '0' + m : m;\n            s = s < 10 ? '0' + s : s;\n            $('.vip-banner span').text(m + ':' + s);\n\n            if (leftTime % 10 == 0) {\n                leftTime = deadline - new Date().getTime();\n            } else {\n                leftTime--;\n            }\n        }, 1000);\n    });\n\n    startLab();\n}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/course/labDoc.js\n ** module id = 0\n ** module chunks = 10\n **/\n//# sourceURL=webpack:///./src/course/labDoc.js?")},function(module,exports){eval('module.exports = lib;\n\n/*****************\n ** WEBPACK FOOTER\n ** external "lib"\n ** module id = 1\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28\n **/\n//# sourceURL=webpack:///external_%22lib%22?')},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(66);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/bootstrap/dist/js/npm.js from dll-reference lib\n ** module id = 2\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28\n **/\n//# sourceURL=webpack:///delegated_./node_modules/bootstrap/dist/js/npm.js_from_dll-reference_lib?")},,function(module,exports,__webpack_require__){eval("'use strict';\n\n__webpack_require__(2);\n\nvar jdata = $('#jinja-data').data();\n\n// 解析表单serialize字符串为JSON\n(function ($) {\n    $.fn.serializeJSON = function () {\n        var serializeObj = {};\n        var array = this.serializeArray();\n        var str = this.serialize();\n\n        $(array).each(function () {\n            if (serializeObj[this.name]) {\n                if ($.isArray(serializeObj[this.name])) {\n                    serializeObj[this.name].push(this.value);\n                } else {\n                    serializeObj[this.name] = [serializeObj[this.name], this.value];\n                }\n            } else {\n                serializeObj[this.name] = this.value;\n            }\n        });\n        return serializeObj;\n    };\n})(jQuery);\n\n// 显示 flash 提示信息\nfunction flashMessage(status, message, timeout, callback) {\n    var fn;\n\n    if (timeout && typeof timeout === 'function' && !callback) {\n        fn = timeout;\n        timeout = null;\n    } else if (callback && typeof callback === 'function') {\n        fn = callback;\n    }\n\n    var flashModal = $('#flash-message'),\n        timeout = parseInt(timeout) || 3000,\n        status = status == 'error' ? 'danger' : status,\n        html = '' + '<div class=\"alert alert-' + status + '\" style=\"text-align: center;\">' + message + '</div>';\n\n    flashModal.find('.modal-dialog').html(html);\n    flashModal.modal('show');\n    flashModal.on('hide.bs.modal', function () {\n        // 运行回调函数\n        fn && fn();\n    });\n\n    setTimeout(function () {\n        flashModal.modal('hide');\n    }, timeout);\n}\n\n// flash http status 429 错误信息\nfunction flash429Error() {\n    flashMessage('error', '操作过于频繁，请稍后重试');\n}\n\n// 显示 modal 提示信息\nfunction modalMessage(status, message, title) {\n    var msgModal = $('#modal-message'),\n        status = status == 'error' ? 'danger' : status,\n        html = '' + '<div class=\"alert alert-' + status + '\" style=\"text-align: center;\">' + message + '</div>';\n\n    if (title && typeof title === 'string') {\n        msgModal.find('.modal-title').html(title);\n    }\n\n    msgModal.find('.modal-body').html(html);\n    msgModal.modal('show');\n}\n\n// 用户排名\nfunction usersTop(url, documentObj, loadMethod) {\n    /**\n     * 用户排名\n     *\n     * @params {string} url 获取用户排名的url\n     * @params {object} documentObj 加载用户排名到页面的jquery document对象\n     * @params {string} loadMethod 加载用户排名到页面的方式\n     *     默认为 $(domObj).append(html);\n     *     也可以使用 $(domObj).html(html);\n     *     传入'append'或者'html'会调用对应方法\n     *\n     */\n\n    $.get(url).done(function (data) {\n        if (data.status == 'success') {\n            var ranks = data.rank;\n            var html = '';\n\n            html += '' + '<div class=\"sidebox users-top\">' + '<div class=\"sidebox-header users-top-header\">' + '<h4 class=\"sidebox-title\">学习排名<span>（有效学习时间）</span></h4>' + '</div>';\n\n            for (var i = 0, len = ranks.length; i < len; i++) {\n                html += '' + '<div class=\"clearfix sidebox-body users-top-body\">' + '<div class=\"pull-left users-top-left\">' + '<a class=\"pull-left\" href=\"' + ranks[i].home_page + '\">' + '<img class=\"users-top-img\" src=\"' + ranks[i].avatar + '\">';\n\n                if (ranks[i].is_member) {\n                    html += '<span class=\"user-vip\"><img src=\"' + jdata.vipIcon + '\"></span>';\n                }\n\n                html += '' + '</a>' + '<div class=\"pull-left\">' + '<span>' + ranks[i].name + '</span><br>' + '<span class=\"users-top-study-time\">' + ranks[i].study_time + ' 分钟</span>' + '</div>' + '</div>' + '<div class=\"pull-right users-top-right\">' + '<img src=\"' + ranks[i].image + '\">' + '</div>' + '</div>';\n            }\n\n            html += '' + '</div>';\n\n            if (loadMethod == 'html') {\n                $(documentObj).html(html);\n            } else {\n                $(documentObj).append(html);\n            }\n        }\n    });\n}\n\nmodule.exports = {\n    flashMessage: flashMessage,\n    modalMessage: modalMessage,\n    usersTop: usersTop,\n    flash429Error: flash429Error\n};\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base/utils.js\n ** module id = 4\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28\n **/\n//# sourceURL=webpack:///./src/base/utils.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\n__webpack_require__(2);\n__webpack_require__(10);\n__webpack_require__(7);\n__webpack_require__(8);\n\nvar utils = __webpack_require__(4);\nvar jdata = $('#base-data').data();\n\n$(function () {\n    lottery();\n\n    // 点击统计\n    $(document).on('click', '.stat-event', function () {\n        var name = $(this).data('stat');\n\n        $.post('/api/logstash', { name: name }).fail(function () {\n            console.log('ajax failed');\n        });\n    });\n\n    // 初始化 switch btn\n    $('.switch-btn input[type=checkbox]').bootstrapSwitch({\n        onText: '是',\n        offText: '否',\n        onColor: 'success'\n    });\n\n    // 初始化Bootstrap插件\n    // tooltip & popover\n    $('[data-toggle=\"tooltip\"]').tooltip();\n    $('[data-toggle=\"popover\"]').popover();\n\n    // 显示来自后台的 flash\n    if (jdata.flash) {\n        $('#flash').modal('show');\n        setTimeout(function () {\n            $('#flash').modal('hide');\n        }, 3000);\n    }\n\n    // 点击VIP用户头像旁的V标志\n    $('.header .user-vip').on('click', function () {\n        var url = $(this).data('url');\n\n        window.location.href = url;\n        return false;\n    });\n\n    // 初始化 flash modal\n    $('#flash-modal').modal();\n\n    // 新功能提醒\n    $('#new-features').modal('show').find('.btn').on('click', function () {\n        window.open($(this).data('href'), 'blank');\n    });\n\n    // 控制表单字数显示\n    $('.words-ctrl form input, .words-ctrl form textarea').on('keyup keypress', function () {\n        var min = $(this).attr('min');\n        var max = $(this).attr('max');\n        var count = $(this).val().length;\n        var str = '';\n\n        if (min !== undefined && max !== undefined) {\n            if (count < min) {\n                str = '<span class=\"text-danger\">字数太少，至少需要' + min + '字</span>';\n            } else if (count > max) {\n                str = '<span class=\"text-danger\">字数太多，不能超过' + max + '字</span>';\n            } else {\n                str = '<span class=\"text-success\">还能输入' + (max - count) + '字</span>';\n            }\n\n            $(this).parent().find('.help-block').html(str).show();\n        }\n    });\n});\n\nfunction lottery() {\n    if (!jdata.isLogin || $('#lottery-modal').length) {\n        return false;\n    }\n\n    var fone = localStorage.fone;\n    var deadline = localStorage.lottery;\n    var today = new Date();\n\n    today = today.getDate();\n\n    if (Number(deadline) != today || !fone) {\n        $('#lottery-modal').modal('show');\n\n        localStorage.lottery = today;\n        localStorage.fone = 1;\n    }\n}\n\n// 学校提示\n$(function () {\n    $('input[name=school]').on('keypress keyup', function () {\n        $('.college-suggestion').remove();\n        var self = this;\n        var key = $(this).val();\n        $.get('/search/college', { search: key }).done(function (data) {\n            console.log(data);\n            if (data.data.length) {\n                var res = data.data;\n                var html = '<div class=\"college-suggestion\">';\n\n                for (var i = 0; i < res.length; i++) {\n                    html += '<a>' + res[i] + '</a>';\n                }\n                html += '</div>';\n\n                $(self).parent().append(html);\n                $('.college-suggestion').css({\n                    position: 'absolute',\n                    padding: '4px',\n                    border: 'solid 1px #eee',\n                    'border-top': 'none',\n                    background: '#fff',\n                    'z-index': 2000\n                }).find('a').css({\n                    display: 'block',\n                    padding: '6px 8px',\n                    color: '#4c5157',\n                    'font-size': '13px'\n                }).hover(function () {\n                    $(this).css({\n                        color: '#fff',\n                        background: '#0c9',\n                        'text-decoration': 'none'\n                    });\n                    $(self).val($(this).text());\n                }, function () {\n                    $(this).css({\n                        color: '#4c5157',\n                        background: '#fff'\n                    });\n                });\n\n                $('.college-suggestion').on('click', function () {\n                    $('.college-suggestion').remove();\n                });\n            }\n        });\n    });\n});\n\n// 即时搜索\n$(function () {\n    $('.navbar-form input[name=search]').on('keypress keyup', function () {\n        var self = this;\n        var key = $(this).val();\n\n        $.get('/search/json', { search: key }).done(function (data) {\n            if (data.data.length) {\n                var res = data.data;\n                var html = '<div class=\"search-autocomplete\">';\n\n                for (var i = 0; i < res.length; i++) {\n                    html += '<a href=\"/search?search=' + encodeURIComponent(res[i]) + '\">' + res[i] + '</a>';\n                }\n                html += '</div>';\n\n                $('.header .form-group').append(html);\n                $('.search-autocomplete').css({\n                    position: 'absolute',\n                    top: $(self).height() + 14,\n                    left: 1,\n                    width: $(self).width() + 24,\n                    padding: '4px',\n                    border: 'solid 1px #eee',\n                    'border-top': 'none',\n                    background: '#fff',\n                    'z-index': 2000\n                }).find('a').css({\n                    display: 'block',\n                    padding: '6px 8px',\n                    color: '#4c5157',\n                    'font-size': '13px'\n                }).hover(function () {\n                    $(this).css({\n                        color: '#fff',\n                        background: '#0c9',\n                        'text-decoration': 'none'\n                    });\n                    $(self).val($(this).text());\n                }, function () {\n                    $(this).css({\n                        color: '#4c5157',\n                        background: '#fff'\n                    });\n                });\n\n                $('.search-autocomplete').on('mouseleave click', function () {\n                    $('.search-autocomplete').remove();\n                });\n            } else {\n                $('.search-autocomplete').remove();\n            }\n        });\n    });\n});\n\nmodule.exports = utils;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base/base.js\n ** module id = 5\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///./src/base/base.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nvar io = __webpack_require__(9);\n\nvar bdata = $('#base-data').data();\nvar socket = null;\n\nif (bdata.isLogin) {\n    var option = {\n        query: 'token=' + bdata.jwtToken,\n        transports: ['websocket']\n    };\n\n    if (!bdata.isJwt) {\n        option.query = 'uid=' + bdata.userId;\n    }\n\n    socket = io(bdata.socketUrl, option);\n\n    socket.on('disconnect', function () {\n        socket.disconnect();\n    });\n}\n\nmodule.exports = socket;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base/io.js\n ** module id = 6\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///./src/base/io.js?")},function(module,exports){eval('\'use strict\';\n\nvar qqGroupOptions = {\n    placement: \'top\',\n    html: true,\n    title: \'实验楼用户群\',\n    content: \'<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=c080b8e55a975b6c9cf38cbaa8c9af764ddae862bdb4e78682af132862e3c57e">469785612<br>(在校生学习群)</a><a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=c89a6f4810351a227cb5a8db5f2dd43331da23316d8c55ecaf37fb2c858785b9">群1 : 241818371 </a><a>群2：235772301</a><a>群3：450412940</a>\',\n    template: \'<div class="popover footer-qq-group" role="tooltip"><div class="arrow"></div><h3 class="popover-title footer-qq-group-header"></h3><div class="popover-content footer-qq-group-body"></div></div>\',\n    trigger: \'click\'\n};\n\n$(\'.footer-qq-item\').popover(qqGroupOptions);\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base/footer.js\n ** module id = 7\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///./src/base/footer.js?')},function(module,exports,__webpack_require__){eval("'use strict';\n\nvar socket = __webpack_require__(6);\n\nif (socket) {\n    // 用户退出登录\n    socket.on('event:user:logout', function () {\n        socket.emit('disconnection', '');\n        socket.disconnect();\n    });\n\n    // 收到新消息\n    socket.on('event:msg:new', function (data) {\n        $('.header-msg-count').show();\n        $('.header-msg-mark').show();\n        $('.header-avatar').tooltip('show');\n    });\n\n    // 阅读消息\n    socket.on('event:msg:all_read', function (data) {\n        $('.header-msg-count').hide();\n        $('.header-msg-mark').hide();\n    });\n}\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/user/websocket.js\n ** module id = 8\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///./src/user/websocket.js?")},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(144);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/socket.io-client/lib/index.js from dll-reference lib\n ** module id = 9\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///delegated_./node_modules/socket.io-client/lib/index.js_from_dll-reference_lib?")},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(63);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/bootstrap-switch/dist/js/bootstrap-switch.js from dll-reference lib\n ** module id = 10\n ** module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27\n **/\n//# sourceURL=webpack:///delegated_./node_modules/bootstrap-switch/dist/js/bootstrap-switch.js_from_dll-reference_lib?")},function(module,exports,__webpack_require__){eval("'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar marked = __webpack_require__(14);\nvar posthtml = __webpack_require__(16);\nvar katex = __webpack_require__(15);\nvar videojs = __webpack_require__(17);\n\n// from https://github.com/chjj/marked/issues/642\nmarked.Lexer.rules.gfm.heading = marked.Lexer.rules.normal.heading;\nmarked.Lexer.rules.tables.heading = marked.Lexer.rules.normal.heading;\n\nvar defaults = {\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false\n};\n\nfunction renderKatex(expr) {\n    if (expr[0] === '$' && expr[expr.length - 1] === '$') {\n        var displayStyle = false;\n        expr = expr.substr(1, expr.length - 2);\n\n        if (expr[0] === '$' && expr[expr.length - 1] === '$') {\n            expr = expr.substr(1, expr.length - 2);\n\n            if (/^[\\$]*\\$$/g.test(expr)) {\n                return null;\n            }\n            return katex.renderToString(expr);\n        }\n    }\n    return null;\n}\n\nfunction renderVideo(expr) {\n    if (expr[0] === '@' && expr[expr.length - 1] === '@') {\n        var _ret = function () {\n            expr = expr.substr(1, expr.length - 2).trim();\n\n            var arr = expr.split(/[,\\s]+/g);\n            var sources = {};\n            var reg = /\\.(\\w+)$/g;\n\n            arr.map(function (source, i, arr) {\n                reg.lastIndex = 0;\n\n                if (reg.test(source)) {\n                    reg.lastIndex = 0;\n\n                    var ex = reg.exec(source)[1];\n                    sources[ex] = source;\n                }\n            });\n\n            var sourcesHtml = '';\n            for (var key in sources) {\n                var ex = key === 'flv' ? 'x-flv' : key;\n                sourcesHtml += '<source src=\"' + sources[key] + '\" type=\"video/' + ex + '\">';\n            }\n\n            var hasFlash = false;\n            try {\n                hasFlash = Boolean(new ActiveXObject('ShockwaveFlash.ShockwaveFlash'));\n            } catch (exception) {\n                hasFlash = 'undefined' != typeof navigator.mimeTypes['application/x-shockwave-flash'];\n            }\n\n            var checkFlash = '';\n            if (!hasFlash) {\n                checkFlash = '<blockquote><p>您还没有安装flash播放器，请点击<a href=\"http://www.adobe.com/go/getflash\" target=\"_blank\">这里</a>安装</p>\\n                <p>安装后重启浏览器即可播放视频</p></blockquote>';\n            }\n\n            return {\n                v: checkFlash + '<video class=\"video-js vjs-default-skin\" controls preload=\"auto\"\\n            style=\"width:100%; height:500px;\" data-setup=\\'{}\\'>' + sourcesHtml + '</video>'\n            };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n\n    return null;\n}\n\nfunction parser(src, options) {\n    options = options || {};\n\n    Object.keys(defaults).forEach(function (key) {\n        if (options[key] === undefined) {\n            options[key] = defaults[key];\n        }\n    });\n\n    options.renderer = new marked.Renderer();\n\n    // render katex\n    if (options.math !== false) {\n        (function () {\n            var originalCodeSpan = options.renderer.codespan.bind(options.renderer);\n            options.renderer.codespan = function (text) {\n                var math = void 0;\n\n                if (math = renderKatex(text)) {\n                    return math;\n                }\n                return originalCodeSpan(text);\n            };\n        })();\n    }\n\n    // render video\n    if (options.video !== false) {\n        (function () {\n            var originalCodespan = options.renderer.codespan.bind(options.renderer);\n            options.renderer.codespan = function (text) {\n                var video = void 0;\n\n                if (video = renderVideo(text)) {\n                    return video;\n                }\n                return originalCodespan(text);\n            };\n        })();\n    }\n\n    var content = marked(src, options);\n\n    // 调整错乱的 html\n    content = posthtml().process(content, { sync: true }).html;\n\n    // 替换 script 标签为 pre code 标签\n    var fullContent = $('<div>' + content + '</div>');\n    fullContent.find('script').each(function () {\n        var h = $(this).html();\n        $(this).replaceWith('<pre><code>' + h + '</code></pre>');\n    });\n    content = fullContent.html();\n\n    return content;\n}\n\nmodule.exports = parser;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base/markdown.js\n ** module id = 11\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n **/\n//# sourceURL=webpack:///./src/base/markdown.js?")},function(module,exports,__webpack_require__){eval("'use strict';\n\n__webpack_require__(2);\n\nvar loading = '' + '<div>' + '<i class=\"fa fa-spinner fa-pulse\"></i>' + '</div>';\n\nvar $loading = $(loading);\n\n$('body').append($loading);\n\n$loading.css({\n    display: 'none',\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: 'rgba(0,0,0,0.5)',\n    'text-align': 'center',\n    'z-index': 1600\n});\n\n$loading.find('.fa').css({\n    'margin-top': $(window).height() * 0.4,\n    'color': '#fff',\n    'font-size': '35px'\n});\n\n$(window).on('resize', function () {\n    $loading.find('.fa').css({\n        'margin-top': $(window).height() * 0.4\n    });\n});\n\n// 显示\nfunction show($container, text) {\n    if ($container) {\n        $loading.css({\n            top: $container.offset().top,\n            left: $container.offset().left,\n            width: $container.width(),\n            height: $container.height()\n        });\n    }\n    if (text) {\n        var $msg = $('<div>' + text + '</div>');\n\n        $msg.css({\n            'margin-top': '10px',\n            'color': '#fff',\n            'font-size': '15px',\n            'text-align': 'center'\n        });\n\n        $loading.append($msg);\n    }\n\n    $loading.show();\n}\n\n// 隐藏\nfunction hide() {\n    $loading.css({\n        top: 0,\n        left: 0,\n        width: 'auto',\n        height: 'auto'\n    });\n    $loading.hide();\n}\n\nmodule.exports = { show: show, hide: hide };\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/modules/loading.js\n ** module id = 12\n ** module chunks = 1 2 3 4 5 6 7 8 10 16\n **/\n//# sourceURL=webpack:///./src/modules/loading.js?");
},function(module,exports){eval('module.exports = hljs;\n\n/*****************\n ** WEBPACK FOOTER\n ** external "hljs"\n ** module id = 13\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12\n **/\n//# sourceURL=webpack:///external_%22hljs%22?')},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(129);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/marked/lib/marked.js from dll-reference lib\n ** module id = 14\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n **/\n//# sourceURL=webpack:///delegated_./node_modules/marked/lib/marked.js_from_dll-reference_lib?")},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(116);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/katex/katex.js from dll-reference lib\n ** module id = 15\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n **/\n//# sourceURL=webpack:///delegated_./node_modules/katex/katex.js_from_dll-reference_lib?")},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(137);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/posthtml/lib/posthtml.js from dll-reference lib\n ** module id = 16\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n **/\n//# sourceURL=webpack:///delegated_./node_modules/posthtml/lib/posthtml.js_from_dll-reference_lib?")},function(module,exports,__webpack_require__){eval("module.exports = (__webpack_require__(1))(153);\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/video.js/dist/video.js from dll-reference lib\n ** module id = 17\n ** module chunks = 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n **/\n//# sourceURL=webpack:///delegated_./node_modules/video.js/dist/video.js_from_dll-reference_lib?")}]);